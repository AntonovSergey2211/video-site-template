(this["webpackJsonpvideo-site-template"]=this["webpackJsonpvideo-site-template"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),l=n.n(o),i=(n(16),n(2)),c=n(3),u=n(4),s=n(5),f=n(1);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var h=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),v=a.a.createElement("path",{fill:"red",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"}),m=function(e){var t=e.svgRef,n=e.title,r=p(e,["svgRef","title"]);return a.a.createElement("svg",d({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,h,v)},g=a.a.forwardRef((function(e,t){return a.a.createElement(m,d({svgRef:t},e))}));n.p;function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var O=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),E=a.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),w=function(e){var t=e.svgRef,n=e.title,r=y(e,["svgRef","title"]);return a.a.createElement("svg",b({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,O,E)},j=a.a.forwardRef((function(e,t){return a.a.createElement(w,b({svgRef:t},e))}));n.p;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),S=a.a.createElement("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),R=function(e){var t=e.svgRef,n=e.title,r=x(e,["svgRef","title"]);return a.a.createElement("svg",k({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,C,S)},M=a.a.forwardRef((function(e,t){return a.a.createElement(R,k({svgRef:t},e))})),P=(n.p,{padding:"8pt",width:"24pt",height:"24pt"}),I={light:{backgroundColor:"white",color:"black",fill:"gray"},dark:{backgroundColor:"#444",color:"#ddd",fill:"#bbb"}},V="50px",z="100%",B=n(10),H=function(e){return e&&"object"===typeof e};function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object.keys(t).forEach((function(n){var r=e[n],a=t[n];Array.isArray(r)&&Array.isArray(a)?e[n]=r.concat.apply(r,Object(B.a)(a)):H(r)&&H(a)?e[n]=L(r,a):e[n]=a})),e}),{})}function N(e,t,n){return{light:L(e,t),dark:L(e,n)}}function A(e){var t=(new Date).getHours();return t>=8&&t<=20?e.light:e.dark}var T=N({header:{position:"fixed",top:"0px",transition:"top 0.2s",height:V,width:z,display:"flex",justifyContent:"space-between",filter:"drop-shadow(0 2pt 2pt rgba(0, 0, 0, 0.2))"},logo:Object(f.a)({},P),button:Object(f.a)({},P),title:{fontSize:"20px",fontFamily:"Oswald",display:"flex",alignItems:"center"}},{header:{backgroundColor:I.light.backgroundColor},button:{fill:I.light.fill},title:{color:I.light.color}},{header:{backgroundColor:I.dark.backgroundColor},button:{fill:I.dark.fill},title:{color:I.dark.color}});var W=function(e){var t=A(T),n=Object(f.a)({},t.header,{top:e.visible?"0px":"-".concat(V)});return a.a.createElement("div",{style:n},a.a.createElement("div",{style:t.title},a.a.createElement(g,{style:t.logo}),a.a.createElement("div",null,a.a.createElement("span",null,"Videos"))),a.a.createElement("div",null,a.a.createElement(j,{style:t.button}),a.a.createElement(M,{style:t.button})))},D=n(6),J=n.n(D),F=n(9);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $=a.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),q=a.a.createElement("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"}),G=function(e){var t=e.svgRef,n=e.title,r=U(e,["svgRef","title"]);return a.a.createElement("svg",K({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,$,q)},Q=a.a.forwardRef((function(e,t){return a.a.createElement(G,K({svgRef:t},e))}));n.p;function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Z=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),_=a.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),ee=function(e){var t=e.svgRef,n=e.title,r=Y(e,["svgRef","title"]);return a.a.createElement("svg",X({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,Z,_)},te=a.a.forwardRef((function(e,t){return a.a.createElement(ee,X({svgRef:t},e))})),ne=(n.p,N({video:{margin:0,padding:0,backgroundColor:"black"},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px 10px 20px 10px"},footerButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"},button:Object(f.a)({},{padding:"4pt",width:"14pt",height:"14pt"})},{title:{color:I.light.color},button:{fill:I.light.fill}},{title:{color:I.dark.color},button:{fill:I.dark.fill}})),re=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).ref=Object(r.createRef)(),e}return Object(c.a)(n,[{key:"formatCount",value:function(e){return e>1e6?Math.round(e/1e6)+"M":e>1e3?Math.round(e/1e3)+"K":e}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isPlaying,r=A(ne),o="".concat(window.innerWidth,"px"),l="".concat(Math.ceil(window.innerWidth*(9/16)),"px"),i=this.formatCount(t.likeCount),c=null;if(n){var u={display:n?"block":"none",width:o,height:l},s=Object(f.a)({},r.video,{width:o,height:l}),d=t.sources.map((function(e,t){return a.a.createElement("source",{key:t,src:e})}));c=a.a.createElement("div",{style:u},a.a.createElement("video",{style:s,ref:this.ref,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},d))}else{var p=Object(f.a)({},r.video,{display:n?"none":"block",width:o,height:l});c=a.a.createElement("img",{style:p,src:t.thumb,alt:t.subtitle})}return a.a.createElement("div",null,c,a.a.createElement("div",{style:r.footer},a.a.createElement("span",{style:r.title},t.title),a.a.createElement("div",{style:r.footerButtons},a.a.createElement(Q,{style:r.button}),a.a.createElement("span",{style:r.title},i),a.a.createElement(te,{style:r.button}))))}}]),n}(r.Component);n(18);var ae=function(e){var t=A(I),n={borderColor:"".concat(t.fill," transparent transparent transparent")};return a.a.createElement("div",{className:"Preloader"},a.a.createElement("div",{style:n}),a.a.createElement("div",{style:n}),a.a.createElement("div",{style:n}),a.a.createElement("div",{style:n}))},oe={container:{marginTop:V},preloader:{display:"flex",justifyContent:"center",alignItems:"center",height:"70px"}},le=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).lastPosition=0,e.updateCurrentVideoTimer=-1,e.handleScroll=function(){var t=document.body.getBoundingClientRect(),n=t.top+t.height,r=t.top-e.lastPosition;t.top<0&&r<0?e.props.onScroll(!1):r>0&&e.props.onScroll(!0),e.lastPosition=t.top,n<=window.innerHeight+1&&e.loadNextVideos();var a=Array.from(e.ref.current.childNodes).findIndex((function(e){return e.getBoundingClientRect().top>0}));clearTimeout(e.updateCurrentVideoTimer),e.updateCurrentVideoTimer=setTimeout((function(){console.log("update current video",a),e.setState({currentVideo:a})}),1e3)},e.ref=Object(r.createRef)(),e.state={isLoading:!1,currentVideo:0,videos:[]},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadNextVideos(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"loadNextVideos",value:function(){var e=Object(F.a)(J.a.mark((function e(){var t,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isLoading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({isLoading:!0}),e.next=5,fetch(this.props.dataSource);case 5:return t=e.sent,e.next=8,t.json();case 8:(r=e.sent).forEach((function(e){e.id=n.getNextId(),e.sortValue=Math.random(),e.likeCount=Math.round(1e7*Math.random()),e.time=Math.round(60*Math.random()*60)})),r.sort((function(e,t){return e.sortValue-t.sortValue})),this.setState((function(e){return{videos:e.videos.concat(r),isLoading:!1}}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.videos,n=e.currentVideo,r=t.map((function(e,t){return a.a.createElement(re,{key:e.id,data:e,isPlaying:n===t})}));return a.a.createElement("div",{ref:this.ref,style:oe.container},r,a.a.createElement("div",{style:oe.preloader},a.a.createElement(ae,null)))}}],[{key:"getNextId",value:function(){return n.nextId++}}]),n}(r.Component);le.nextId=0;var ie=le;!function(){var e=A(I);document.body.style.backgroundColor=e.backgroundColor}();var ce=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).onScroll=function(t){e.setState({headerIsVisible:t})},e.state={headerIsVisible:!0},e}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(W,{visible:this.state.headerIsVisible}),a.a.createElement(ie,{dataSource:"data/videos.json",onScroll:this.onScroll}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.8b330762.chunk.js.map