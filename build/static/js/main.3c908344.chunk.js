(this["webpackJsonpvideo-site-template"]=this["webpackJsonpvideo-site-template"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(8),i=n.n(a),l=(n(16),n(1)),c=n(2),s=n(3),u=n(5),d=n(4);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),v=o.a.createElement("path",{fill:"red",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"}),m=function(e){var t=e.svgRef,n=e.title,r=p(e,["svgRef","title"]);return o.a.createElement("svg",f({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,h,v)},b=o.a.forwardRef((function(e,t){return o.a.createElement(m,f({svgRef:t},e))}));n.p;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var O=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),k=o.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),E=function(e){var t=e.svgRef,n=e.title,r=g(e,["svgRef","title"]);return o.a.createElement("svg",y({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,O,k)},j=o.a.forwardRef((function(e,t){return o.a.createElement(E,y({svgRef:t},e))}));n.p;function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var S=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),x=o.a.createElement("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),V=function(e){var t=e.svgRef,n=e.title,r=C(e,["svgRef","title"]);return o.a.createElement("svg",w({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,S,x)},R=o.a.forwardRef((function(e,t){return o.a.createElement(V,w({svgRef:t},e))}));n.p;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var M=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),F=o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),z=function(e){var t=e.svgRef,n=e.title,r=L(e,["svgRef","title"]);return o.a.createElement("svg",P({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,M,F)},I=o.a.forwardRef((function(e,t){return o.a.createElement(z,P({svgRef:t},e))})),B=(n.p,{padding:"8pt",width:"24pt",height:"24pt"}),H={light:{backgroundColor:"white",color:"black",fill:"gray"},dark:{backgroundColor:"#444",color:"#ddd",fill:"#bbb"}},T="50px",N="100%",A=n(10),W=function(e){return e&&"object"===typeof e};function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object.keys(t).forEach((function(n){var r=e[n],o=t[n];Array.isArray(r)&&Array.isArray(o)?e[n]=r.concat.apply(r,Object(A.a)(o)):W(r)&&W(o)?e[n]=D(r,o):e[n]=o})),e}),{})}function J(e,t,n){return{light:D(e,t),dark:D(e,n)}}function K(e){var t=(new Date).getHours();return t>=8&&t<=20?e.light:e.dark}var U=J({header:{position:"fixed",top:"0px",transition:"top 0.2s",height:T,width:N,display:"flex",justifyContent:"space-between",filter:"drop-shadow(0 2pt 2pt rgba(0, 0, 0, 0.2))"},logo:Object(l.a)({},B),button:Object(l.a)({},B),title:{fontSize:"20px",fontFamily:"Oswald",display:"flex",alignItems:"center"},searchContainer:{display:"flex",alignItems:"center",width:"100%"},search:{fontSize:"15px",fontFamily:"Roboto, sans-serif",outline:"none",margin:"10px 10px 10px 20px",width:"100%",border:0,borderRadius:0,borderBottom:"3px solid darkblue"}},{header:{backgroundColor:H.light.backgroundColor},button:{fill:H.light.fill},title:{color:H.light.color},search:{color:H.light.color,backgroundColor:H.light.backgroundColor}},{header:{backgroundColor:H.dark.backgroundColor},button:{fill:H.dark.fill},title:{color:H.dark.color},search:{color:H.dark.color,backgroundColor:H.dark.backgroundColor,borderColor:"lightblue"}}),$=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).onSearchClick=function(){e.setState({showSearch:!0})},e.onSearchClose=function(){e.setState({showSearch:!1}),e.props.onFilter(null)},e.onSearchChange=function(t){e.props.onFilter(t.target.value)},e.state={showSearch:!1},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.selectedVideo,r=this.state.showSearch,a=K(U);if(n)return o.a.createElement("div",{style:a.header},o.a.createElement("div",{style:a.title},o.a.createElement(b,{style:a.logo}),o.a.createElement("div",null,o.a.createElement("span",null,"Videos"))),o.a.createElement("div",null,o.a.createElement(I,{style:a.button,onClick:this.props.onVideoClose})));if(r)return o.a.createElement("div",{style:a.header},o.a.createElement("div",{style:a.searchContainer},o.a.createElement("input",{autoFocus:!0,style:a.search,type:"text",placeholder:"Search video",onChange:this.onSearchChange})),o.a.createElement("div",null,o.a.createElement(I,{style:a.button,onClick:this.onSearchClose})));var i=Object(l.a)(Object(l.a)({},a.header),{},{top:t?"0px":"-".concat(T)});return o.a.createElement("div",{style:i},o.a.createElement("div",{style:a.title},o.a.createElement(b,{style:a.logo}),o.a.createElement("div",null,o.a.createElement("span",null,"Videos"))),o.a.createElement("div",null,o.a.createElement(j,{style:a.button,onClick:this.onSearchClick}),o.a.createElement(R,{style:a.button})))}}]),n}(r.Component),q=n(6),G=n.n(q),Q=n(9);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Z=o.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),_=o.a.createElement("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"}),ee=function(e){var t=e.svgRef,n=e.title,r=Y(e,["svgRef","title"]);return o.a.createElement("svg",X({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,Z,_)},te=o.a.forwardRef((function(e,t){return o.a.createElement(ee,X({svgRef:t},e))}));n.p;function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var oe=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ae=o.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),ie=function(e){var t=e.svgRef,n=e.title,r=re(e,["svgRef","title"]);return o.a.createElement("svg",ne({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?o.a.createElement("title",null,n):null,oe,ae)},le=o.a.forwardRef((function(e,t){return o.a.createElement(ie,ne({svgRef:t},e))})),ce=(n.p,J({title:{fontSize:"15px",fontFamily:"Roboto, sans-serif"},video:{margin:0,padding:0,backgroundColor:"black"},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"5px 10px 10px 10px"},footerButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"},button:Object(l.a)({},{padding:"4pt",width:"14pt",height:"14pt"})},{title:{color:H.light.color},button:{fill:H.light.fill}},{title:{color:H.dark.color},button:{fill:H.dark.fill}})),se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).onClick=function(){e.props.onClick&&e.props.onClick(e.props.data)},e.onLikeClick=function(){if(e.props.onLikeClick){var t=e.props.data,n=t.id,r=t.liked;e.props.onLikeClick(n,!r)}},e.onFavoriteClick=function(){if(e.props.onFavoriteClick){var t=e.props.data,n=t.id,r=t.favorite;e.props.onFavoriteClick(n,!r)}},e.ref=Object(r.createRef)(),e}return Object(s.a)(n,[{key:"formatCount",value:function(e){return e>1e6?Math.round(e/1e6)+"M":e>1e3?Math.round(e/1e3)+"K":e}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isPlaying,r=e.controls;if(!t)return o.a.createElement("div",null,"Video not found");var a=K(ce),i="".concat(window.innerWidth,"px"),c="".concat(Math.ceil(window.innerWidth*(9/16)),"px"),s=t.likeCount,u=t.liked,d=t.favorite,f=t.sources,p=t.thumb,h=t.subtitle,v=t.title,m=t.description,b=this.formatCount(s+(u?1:0)),y=null;if(n){var g={display:n?"block":"none",width:i,height:c},O=Object(l.a)(Object(l.a)({},a.video),{},{width:i,height:c}),k=f.map((function(e,t){return o.a.createElement("source",{key:t,src:e})}));y=o.a.createElement("div",{style:g},o.a.createElement("video",{style:O,ref:this.ref,autoPlay:!0,loop:!r,muted:!r,controls:r,playsInline:!0},k))}else{var E=Object(l.a)(Object(l.a)({},a.video),{},{display:n?"none":"block",width:i,height:c});y=o.a.createElement("img",{style:E,src:p,alt:h})}var j=Object(l.a)({},a.button);u&&(j.fill="red");var w=Object(l.a)({},a.button);return d&&(w.fill="red"),o.a.createElement("div",{style:{marginBottom:"30px"}},o.a.createElement("div",{onClick:this.onClick},y),o.a.createElement("div",{style:a.footer},o.a.createElement("span",{style:a.title},v),o.a.createElement("div",{style:a.footerButtons},o.a.createElement(te,{style:j,onClick:this.onLikeClick}),o.a.createElement("span",{style:a.title},b),o.a.createElement(le,{style:w,onClick:this.onFavoriteClick}))),o.a.createElement("div",{style:Object(l.a)(Object(l.a)({},a.footer),{},{display:r?"block":"none"})},o.a.createElement("div",null,o.a.createElement("span",{style:a.title},m))))}}]),n}(r.Component);n(18);var ue=function(e){var t=K(H),n={borderColor:"".concat(t.fill," transparent transparent transparent")};return o.a.createElement("div",{className:"Preloader"},o.a.createElement("div",{style:n}),o.a.createElement("div",{style:n}),o.a.createElement("div",{style:n}),o.a.createElement("div",{style:n}))},de={display:"flex",justifyContent:"center",alignItems:"center",height:"70px"},fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).lastPosition=0,e.updateCurrentVideoTimer=-1,e.handleScroll=function(){if(e.props.visible){var t=document.body.getBoundingClientRect(),n=t.top+t.height,r=t.top-e.lastPosition;t.top<0&&r<0?e.props.onScroll(!1):r>0&&e.props.onScroll(!0),e.lastPosition=t.top,n<=window.innerHeight+1&&e.loadNextVideos();var o=Array.from(e.ref.current.childNodes).findIndex((function(e){return e.getBoundingClientRect().top>0}));clearTimeout(e.updateCurrentVideoTimer),e.updateCurrentVideoTimer=setTimeout((function(){e.setState({currentVideo:o})}),1e3)}},e.onSelectVideo=function(t){e.props.onSelectVideo(t)},e.onLikeVideo=function(t,n){e.setState((function(e){return{videos:e.videos.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{liked:n}):e}))}}))},e.onFavoriteVideo=function(t,n){e.setState((function(e){return{videos:e.videos.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{favorite:n}):e}))}}))},e.ref=Object(r.createRef)(),e.state={isLoading:!1,currentVideo:0,videos:[]},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.loadNextVideos(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"loadNextVideos",value:function(){var e=Object(Q.a)(G.a.mark((function e(){var t,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.filter){e.next=2;break}return e.abrupt("return");case 2:if(!this.state.isLoading){e.next=4;break}return e.abrupt("return");case 4:return this.setState({isLoading:!0}),e.next=7,fetch(this.props.dataSource);case 7:return t=e.sent,e.next=10,t.json();case 10:(r=e.sent).forEach((function(e){e.id=n.getNextId(),e.sortValue=Math.random(),e.likeCount=Math.round(Math.random()*(Math.random()>.5?1e3:1e4)),e.time=Math.round(60*Math.random()*60)})),r.sort((function(e,t){return e.sortValue-t.sortValue})),this.setState((function(e){return{videos:e.videos.concat(r),isLoading:!1}}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"containsFilter",value:function(e,t){var n=e.title,r=e.description;return t=t.toLowerCase(),-1!==n.toLowerCase().indexOf(t)||-1!==r.toLowerCase().indexOf(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.videos,r=t.currentVideo,a=this.props.filter,i=(a?n.filter((function(t){return e.containsFilter(t,a)})):n).map((function(t,n){return o.a.createElement(se,{key:t.id,data:t,isPlaying:r===n,onClick:e.onSelectVideo,onLikeClick:e.onLikeVideo,onFavoriteClick:e.onFavoriteVideo})})),c=Object(l.a)(Object(l.a)({},de),{},{display:a?"none":de.display}),s={display:this.props.visible?"block":"none"};return o.a.createElement("div",{ref:this.ref,style:s},i,o.a.createElement("div",{style:c},o.a.createElement(ue,null)))}}],[{key:"getNextId",value:function(){return n.nextId++}}]),n}(r.Component);fe.nextId=0;var pe=fe;!function(){var e=K(H);document.body.style.backgroundColor=e.backgroundColor}();var he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).onScroll=function(t){e.setState({showHeader:t})},e.onFilter=function(t){t&&window.scrollTo(0,0),e.setState({filter:t})},e.onSelectVideo=function(t){e.lastScrollPosition=document.documentElement.scrollTop,e.setState({selectedVideo:t})},e.onVideoClose=function(){e.setState({selectedVideo:null}),setTimeout((function(){return window.scrollTo(0,e.lastScrollPosition)}),1)},e.onLikeVideo=function(t,n){e.videosList.current.onLikeVideo(t,n),e.setState((function(e){return{selectedVideo:Object(l.a)(Object(l.a)({},e.selectedVideo),{},{liked:n})}}))},e.onFavoriteVideo=function(t,n){e.videosList.current.onFavoriteVideo(t,n),e.setState((function(e){return{selectedVideo:Object(l.a)(Object(l.a)({},e.selectedVideo),{},{favorite:n})}}))},e.state={showHeader:!0,filter:null,selectedVideo:null},e.lastScrollPosition=0,e.videosList=Object(r.createRef)(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.showHeader,n=e.filter,r=e.selectedVideo;return o.a.createElement("div",{className:"App"},o.a.createElement($,{visible:t,onFilter:this.onFilter,selectedVideo:r,onVideoClose:this.onVideoClose}),o.a.createElement("div",{style:{marginTop:T}},o.a.createElement(pe,{ref:this.videosList,visible:!r,dataSource:"data/videos.json",filter:n,onScroll:this.onScroll,onSelectVideo:this.onSelectVideo}),o.a.createElement("div",{style:{display:r?"block":"none"}},o.a.createElement(se,{data:r,isPlaying:!0,controls:!0,onLikeClick:this.onLikeVideo,onFavoriteClick:this.onFavoriteVideo}))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.3c908344.chunk.js.map